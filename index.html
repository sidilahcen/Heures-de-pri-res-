async function searchLocation() {
    const query = document.getElementById('location-input').value.trim();
    if (!query) {
        showError("Veuillez entrer une ville ou un code postal.");
        return;
    }

    showLoading(true);
    clearError();

    try {
        const response = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(query)}&format=json&limit=1`);
        const results = await response.json();
        if (results.length === 0) {
            showError("Lieu non trouv√©.");
            return;
        }

        const { lat, lon } = results[0];
        await updateLocation(parseFloat(lat), parseFloat(lon));

    } catch (error) {
        console.error("Erreur lors de la recherche:", error);
        showError("Erreur lors de la recherche du lieu.");
    } finally {
        showLoading(false);
    }
}
